language:
  python

python:
  - '3.4'

env:
  - APPNAME=test-openspending
  - XUNIT_FILE=shippable/testresults/result.xml

before_script:
  - mkdir -p shippable/testresults
  - mkdir -p shippable/codecoverage
  - pip install -r requirements.txt

script:
  - pylama authz
  - nosetests tests --with-coverage --cover-package authz

# after_script:
  # - node_modules/.bin/istanbul report cobertura --dir shippable/codecoverage/

after_success:
  - git push -f git@heroku.com:${APPNAME}.git master

notifications:
  email:
    - roll@respect31.com
